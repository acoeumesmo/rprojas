{% extends 'base.html' %}

{% block content %}
<div class="text-center mb-4">
  <!-- T칤tulo e descri칞칚o -->
  <h2 class="fw-semibold text-primary">Relat칩rios</h2>
  <p class="text-muted">
    Clique em <b>"Rodar Web Scraping e An치lise"</b> para raspar a p치gina e gerar o relat칩rio automaticamente.
  </p>

  <!-- Bot칫es de a칞칚o -->
  <div class="d-flex justify-content-center gap-2 report-actions flex-wrap">
    <!-- Bot칚o que dispara o scraping e an치lise -->
    <button id="btn-run" class="btn btn-primary">
      游댌 Rodar Web Scraping e An치lise
    </button>

    <!-- Link para baixar o relat칩rio PDF gerado -->
    <a class="btn btn-outline-secondary" href="">
      拘勇 Baixar PDF
    </a>
  </div>

  <!-- Loader de processamento -->
  <div id="loading" class="mt-3" style="display:none;">
    <div class="spinner-border text-primary" role="status"></div>
    <div>Processando... aguarde</div>
  </div>
</div>

<!-- ==================== SE칂츾O DE RESULTADOS ==================== -->
<div id="results" style="display:none;">
  <div class="row">
    <!-- ======= GR츼FICO ======= -->
    <div class="col-md-6 mb-3">
      <div class="card p-3 shadow-sm">
        <h5 class="text-center mb-3">游늵 Distribui칞칚o de Sentimentos</h5>
        <canvas id="chart" height="240"></canvas>
      </div>
    </div>

    <!-- ======= RESUMO ======= -->
    <div class="col-md-6 mb-3">
      <div class="card p-3 shadow-sm">
        <h5 class="fw-semibold">Resumo da An치lise</h5>
        <!-- Lista preenchida dinamicamente via JS -->
        <ul id="summaryList" class="list-unstyled mb-3"></ul>

        <!-- Campo para enviar o relat칩rio por e-mail ->
        <div>
          <label class="form-label">游닎 Receber por e-mail</label>
          <div class="input-group">
            <input id="emailInput" class="form-control" type="email" placeholder="seu@exemplo.com">
            <button id="sendEmailBtn" class="btn btn-outline-primary">Enviar</button>
          </div>
          <!- Mensagem de status (sucesso/erro do envio) ->
          <small id="emailStatus" class="form-text text-muted"></small>
        </div>
      </div>
    </div>
  </div>
</div>

<hr/> -->

<!-- ==================== TABELA DETALHADA ==================== -->
<div class="table-responsive mt-3">
  <table class="table table-striped table-hover align-middle" id="table-details">
    <thead class="table-light">
      <tr>
        <th>Coment치rio</th>
        <th>Sentimento</th>
        <th>Confian칞a</th>
      </tr>
    </thead>
    <tbody>
      <!-- Linhas preenchidas dinamicamente via JS -->
    </tbody>
  </table>
</div>
{% endblock %}

{% block scripts %}
  <script src="{{ url_for('static', filename='js/relatorio.js') }}"></script>
{% endblock %}